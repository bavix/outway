"use strict";(self.webpackChunkoutway_admin_ui=self.webpackChunkoutway_admin_ui||[]).push([[632],{"./node_modules/preact/hooks/dist/hooks.module.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Bi:()=>g,J0:()=>d,Kr:()=>T,MN:()=>P,Md:()=>b,NT:()=>x,Nf:()=>_,WO:()=>h,Yn:()=>F,hb:()=>q,li:()=>A,vJ:()=>y});var t,r,u,i,preact__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/preact/dist/preact.module.js"),o=0,f=[],c=preact__WEBPACK_IMPORTED_MODULE_0__.fF,e=c.__b,a=c.__r,v=c.diffed,l=c.__c,m=c.unmount,s=c.__;function p(n,t){c.__h&&c.__h(r,n,o||t),o=0;var u=r.__H||(r.__H={__:[],__h:[]});return n>=u.__.length&&u.__.push({}),u.__[n]}function d(n){return o=1,h(D,n)}function h(n,u,i){var o=p(t++,2);if(o.t=n,!o.__c&&(o.__=[i?i(u):D(void 0,u),function(n){var t=o.__N?o.__N[0]:o.__[0],r=o.t(t,n);t!==r&&(o.__N=[r,o.__[1]],o.__c.setState({}))}],o.__c=r,!r.__f)){var f=function(n,t,r){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(n){return!!n.__c});if(u.every(function(n){return!n.__N}))return!c||c.call(this,n,t,r);var i=o.__c.props!==n;return u.forEach(function(n){if(n.__N){var t=n.__[0];n.__=n.__N,n.__N=void 0,t!==n.__[0]&&(i=!0)}}),c&&c.call(this,n,t,r)||i};r.__f=!0;var c=r.shouldComponentUpdate,e=r.componentWillUpdate;r.componentWillUpdate=function(n,t,r){if(this.__e){var u=c;c=void 0,f(n,t,r),c=u}e&&e.call(this,n,t,r)},r.shouldComponentUpdate=f}return o.__N||o.__}function y(n,u){var i=p(t++,3);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__H.__h.push(i))}function _(n,u){var i=p(t++,4);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__h.push(i))}function A(n){return o=5,T(function(){return{current:n}},[])}function F(n,t,r){o=6,_(function(){if("function"==typeof n){var r=n(t());return function(){n(null),r&&"function"==typeof r&&r()}}if(n)return n.current=t(),function(){return n.current=null}},null==r?r:r.concat(n))}function T(n,r){var u=p(t++,7);return C(u.__H,r)&&(u.__=n(),u.__H=r,u.__h=n),u.__}function q(n,t){return o=8,T(function(){return n},t)}function x(n){var u=r.context[n.__c],i=p(t++,9);return i.c=n,u?(null==i.__&&(i.__=!0,u.sub(r)),u.props.value):n.__}function P(n,t){c.useDebugValue&&c.useDebugValue(t?t(n):n)}function b(n){var u=p(t++,10),i=d();return u.__=n,r.componentDidCatch||(r.componentDidCatch=function(n,t){u.__&&u.__(n,t),i[1](n)}),[i[0],function(){i[1](void 0)}]}function g(){var n=p(t++,11);if(!n.__){for(var u=r.__v;null!==u&&!u.__m&&null!==u.__;)u=u.__;var i=u.__m||(u.__m=[0,0]);n.__="P"+i[0]+"-"+i[1]++}return n.__}function j(){for(var n;n=f.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(z),n.__H.__h.forEach(B),n.__H.__h=[]}catch(t){n.__H.__h=[],c.__e(t,n.__v)}}c.__b=function(n){r=null,e&&e(n)},c.__=function(n,t){n&&t.__k&&t.__k.__m&&(n.__m=t.__k.__m),s&&s(n,t)},c.__r=function(n){a&&a(n),t=0;var i=(r=n.__c).__H;i&&(u===r?(i.__h=[],r.__h=[],i.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(i.__h.forEach(z),i.__h.forEach(B),i.__h=[],t=0)),u=r},c.diffed=function(n){v&&v(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(1!==f.push(t)&&i===c.requestAnimationFrame||((i=c.requestAnimationFrame)||w)(j)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),u=r=null},c.__c=function(n,t){t.some(function(n){try{n.__h.forEach(z),n.__h=n.__h.filter(function(n){return!n.__||B(n)})}catch(r){t.some(function(n){n.__h&&(n.__h=[])}),t=[],c.__e(r,n.__v)}}),l&&l(n,t)},c.unmount=function(n){m&&m(n);var t,r=n.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{z(n)}catch(n){t=n}}),r.__H=void 0,t&&c.__e(t,r.__v))};var k="function"==typeof requestAnimationFrame;function w(n){var t,r=function(){clearTimeout(u),k&&cancelAnimationFrame(t),setTimeout(n)},u=setTimeout(r,35);k&&(t=requestAnimationFrame(r))}function z(n){var t=r,u=n.__c;"function"==typeof u&&(n.__c=void 0,u()),r=t}function B(n){var t=r;n.__c=n.__(),r=t}function C(n,t){return!n||n.length!==t.length||t.some(function(t,r){return t!==n[r]})}function D(n,t){return"function"==typeof t?t(n):t}},"./node_modules/preact/jsx-runtime/dist/jsxRuntime.module.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FD:()=>u,FK:()=>preact__WEBPACK_IMPORTED_MODULE_0__.FK,Y:()=>u});var preact__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/preact/dist/preact.module.js");var f=0;Array.isArray;function u(e,t,n,o,i,u){t||(t={});var a,c,p=t;if("ref"in p)for(c in p={},t)"ref"==c?a=t[c]:p[c]=t[c];var l={type:e,props:p,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--f,__i:-1,__u:0,__source:i,__self:u};if("function"==typeof e&&(a=e.defaultProps))for(c in a)void 0===p[c]&&(p[c]=a[c]);return preact__WEBPACK_IMPORTED_MODULE_0__.fF.vnode&&preact__WEBPACK_IMPORTED_MODULE_0__.fF.vnode(l),l}},"./src/components/Sidebar.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AllTabs:()=>AllTabs,Collapsed:()=>Collapsed,Expanded:()=>Expanded,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Sidebar_stories});var jsxRuntime_module=__webpack_require__("./node_modules/preact/jsx-runtime/dist/jsxRuntime.module.js"),hooks_module=__webpack_require__("./node_modules/preact/hooks/dist/hooks.module.js");const authService=new class AuthService{constructor(){Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{isAuthenticated:!1,user:null,accessToken:null,refreshToken:null}}),Object.defineProperty(this,"listeners",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"refreshTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"authStatus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"provider",{enumerable:!0,configurable:!0,writable:!0,value:null}),this.loadFromStorage(),this.setupRefreshTimer()}subscribe(listener){return this.listeners.add(listener),()=>this.listeners.delete(listener)}async getAuthStatus(){if(this.authStatus)return this.authStatus;try{if(this.provider){const status=await this.provider.getAuthStatus();return this.authStatus=status,status}return this.state.isAuthenticated,{usersExist:!0}}catch(error){return console.warn("Failed to get auth status from provider:",error),{usersExist:!0}}}setAuthStatus(status){this.authStatus=status}setProvider(provider){this.provider=provider}notifyListeners(){this.listeners.forEach(listener=>listener(this.state))}updateState(updates){this.state={...this.state,...updates},this.saveToStorage(),this.notifyListeners()}loadFromStorage(){try{const stored=localStorage.getItem("outway_auth");if(stored){const parsed=JSON.parse(stored);this.state={isAuthenticated:parsed.isAuthenticated||!1,user:parsed.user||null,accessToken:parsed.accessToken||null,refreshToken:parsed.refreshToken||null},this.state.accessToken&&this.isTokenExpired(this.state.accessToken)?(console.log("Access token expired, attempting refresh..."),this.state.refreshToken?this.refreshToken().catch(()=>{console.log("Refresh failed, logging out..."),this.logout()}):this.logout()):this.state.isAuthenticated&&this.setupRefreshTimer()}}catch(error){console.error("Failed to load auth state from storage:",error),this.clearAuth()}}isTokenExpired(token){try{const payload=this.parseJWT(token);if(!payload||!payload.exp)return!0;const now=Math.floor(Date.now()/1e3);return payload.exp<=now}catch(error){return console.error("Failed to parse token for expiry check:",error),!0}}saveToStorage(){try{localStorage.setItem("outway_auth",JSON.stringify(this.state))}catch(error){console.error("Failed to save auth state to storage:",error)}}clearStorage(){try{localStorage.removeItem("outway_auth")}catch(error){console.error("Failed to clear auth state from storage:",error)}}async login(credentials){const response=await fetch("/api/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(credentials)});if(!response.ok){const error=await response.json();throw new Error(error.error||"Login failed")}const data=await response.json();return this.updateState({isAuthenticated:!0,user:data.user,accessToken:data.access_token,refreshToken:data.refresh_token}),this.setupRefreshTimer(),data}async createFirstUser(user){const response=await fetch("/api/v1/auth/first-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(user)});if(!response.ok){const error=await response.json();throw new Error(error.error||"Failed to create first user")}const data=await response.json();return this.updateState({isAuthenticated:!0,user:data.user,accessToken:data.access_token,refreshToken:data.refresh_token}),this.setupRefreshTimer(),data}async refreshToken(){if(!this.state.refreshToken)throw new Error("No refresh token available");if(this.isTokenExpired(this.state.refreshToken))throw console.log("Refresh token expired, logging out..."),this.logout(),new Error("Refresh token expired");const response=await fetch("/api/v1/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:this.state.refreshToken})});if(!response.ok)throw console.log("Token refresh failed with status:",response.status),this.logout(),new Error("Token refresh failed");const data=await response.json();return this.updateState({accessToken:data.access_token,refreshToken:data.refresh_token}),this.setupRefreshTimer(),data}logout(){this.clearAuth()}clearAuth(){this.updateState({isAuthenticated:!1,user:null,accessToken:null,refreshToken:null}),this.clearStorage(),this.clearRefreshTimer()}getAccessToken(){return this.state.accessToken}getRefreshToken(){return this.state.refreshToken}isAuthenticated(){return this.state.isAuthenticated}getUser(){return this.state.user}setupRefreshTimer(){if(this.clearRefreshTimer(),this.state.refreshToken&&this.state.accessToken)try{const tokenPayload=this.parseJWT(this.state.accessToken);if(!tokenPayload||!tokenPayload.exp)return;const now=Math.floor(Date.now()/1e3),timeUntilExpiry=1e3*(tokenPayload.exp-now),refreshTime=Math.max(timeUntilExpiry-6e4,1e3);console.log(`Token expires in ${Math.floor(timeUntilExpiry/1e3)}s, will refresh in ${Math.floor(refreshTime/1e3)}s`),this.refreshTimer=setTimeout(async()=>{try{console.log("Auto-refreshing token..."),await this.refreshToken()}catch(error){console.error("Auto-refresh failed:",error),this.logout()}},refreshTime)}catch(error){console.error("Failed to parse JWT token for refresh timer:",error),this.refreshTimer=setTimeout(async()=>{try{await this.refreshToken()}catch(error){console.error("Auto-refresh failed:",error),this.logout()}},24e4)}}parseJWT(token){try{const parts=token.split(".");if(3!==parts.length)return null;const payload=parts[1];if(!payload)return null;const decoded=atob(payload.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(decoded)}catch(error){return console.error("Failed to parse JWT:",error),null}}clearRefreshTimer(){this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=null)}async fetchUsers(){return(await this.authenticatedFetch("/api/v1/users")).json()}async createUser(user){return(await this.authenticatedFetch("/api/v1/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(user)})).json()}async getUserByEmail(email){return(await this.authenticatedFetch(`/api/v1/users/${email}`)).json()}async updateUser(email,user){return(await this.authenticatedFetch(`/api/v1/users/${email}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(user)})).json()}async deleteUser(email){await this.authenticatedFetch(`/api/v1/users/${email}`,{method:"DELETE"})}async changePassword(email,newPassword){await this.authenticatedFetch(`/api/v1/users/${email}/change-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:newPassword})})}async fetchRoles(){return(await this.authenticatedFetch("/api/v1/users/roles")).json()}async fetchRolePermissions(role){return(await this.authenticatedFetch(`/api/v1/users/roles/${role}/permissions`)).json()}async authenticatedFetch(url,options={}){if(!this.state.accessToken)throw new Error("Not authenticated");const headers={...options.headers,Authorization:`Bearer ${this.state.accessToken}`},response=await fetch(url,{...options,headers});if(401===response.status)try{await this.refreshToken();const newHeaders={...options.headers,Authorization:`Bearer ${this.state.accessToken}`};return fetch(url,{...options,headers:newHeaders})}catch(error){throw this.logout(),new Error("Authentication failed")}if(!response.ok){const error=await response.json().catch(()=>({error:"Request failed"}));throw new Error(error.error||"Request failed")}return response}},allNavigation=[{id:"overview",label:"Overview",roles:["admin","user"],icon:(0,jsxRuntime_module.FD)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,jsxRuntime_module.Y)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),(0,jsxRuntime_module.Y)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v6H8V5z"})]})},{id:"rules",label:"Rules",roles:["admin"],icon:(0,jsxRuntime_module.Y)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,jsxRuntime_module.Y)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})},{id:"upstreams",label:"Upstreams",roles:["admin"],icon:(0,jsxRuntime_module.Y)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,jsxRuntime_module.Y)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})},{id:"history",label:"History",roles:["admin","user"],icon:(0,jsxRuntime_module.Y)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,jsxRuntime_module.Y)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},{id:"hosts",label:"Hosts",roles:["admin"],icon:(0,jsxRuntime_module.Y)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,jsxRuntime_module.Y)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7h18M3 12h18M3 17h18"})})},{id:"devices",label:"Devices",roles:["admin","user"],icon:(0,jsxRuntime_module.Y)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,jsxRuntime_module.Y)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})})},{id:"resolve",label:"Resolve",roles:["admin","user"],icon:(0,jsxRuntime_module.Y)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,jsxRuntime_module.Y)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3M3 11h18M5 19h14a2 2 0 002-2v-6H3v6a2 2 0 002 2z"})})},{id:"cache",label:"Cache",roles:["admin","user"],icon:(0,jsxRuntime_module.Y)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,jsxRuntime_module.Y)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})},{id:"users",label:"Users",roles:["admin"],icon:(0,jsxRuntime_module.Y)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,jsxRuntime_module.Y)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})},{id:"roles",label:"Roles & Permissions",roles:["admin"],icon:(0,jsxRuntime_module.Y)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,jsxRuntime_module.Y)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})},{id:"update",label:"Updates",roles:["admin","user"],icon:(0,jsxRuntime_module.Y)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,jsxRuntime_module.Y)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}];function Sidebar({activeTab,onTabChange,collapsed=!1}){const[user,setUser]=(0,hooks_module.J0)(authService.state.user);(0,hooks_module.vJ)(()=>authService.subscribe(state=>{setUser(state.user)}),[]);const navigation=allNavigation.filter(item=>!!user&&item.roles.includes(user.role));return(0,jsxRuntime_module.FD)("aside",{className:`fixed left-0 top-0 z-40 h-screen bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm border-r border-gray-100 dark:border-gray-700 transition-all duration-300 ${collapsed?"w-16":"w-64"} ${collapsed?"-translate-x-full lg:translate-x-0":"translate-x-0"} lg:translate-x-0`,children:[(0,jsxRuntime_module.FD)("div",{className:"flex items-center justify-between h-16 px-3 border-b border-gray-100 dark:border-gray-700",children:[!collapsed&&(0,jsxRuntime_module.FD)("div",{className:"flex items-center space-x-2",children:[(0,jsxRuntime_module.Y)("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:(0,jsxRuntime_module.Y)("span",{className:"text-white font-bold text-sm",children:"O"})}),(0,jsxRuntime_module.Y)("span",{className:"text-lg font-semibold text-gray-900 dark:text-white tracking-tight",children:"Outway"})]}),collapsed&&(0,jsxRuntime_module.Y)("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mx-auto shadow-sm",children:(0,jsxRuntime_module.Y)("span",{className:"text-white font-bold text-sm",children:"O"})})]}),(0,jsxRuntime_module.Y)("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:navigation.map(item=>{const isActive=activeTab===item.id;return(0,jsxRuntime_module.FD)("button",{onClick:()=>onTabChange(item.id),className:"w-full flex items-center px-3 py-2.5 text-sm font-medium rounded-xl transition-all duration-200 "+(isActive?"bg-blue-600 text-white shadow-lg shadow-blue-600/25":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"),children:[(0,jsxRuntime_module.Y)("span",{className:"flex-shrink-0 "+(collapsed?"mx-auto":"mr-3"),children:item.icon}),!collapsed&&(0,jsxRuntime_module.Y)("span",{className:"truncate font-medium",children:item.label})]},item.id)})}),(0,jsxRuntime_module.FD)("div",{className:"p-3 border-t border-gray-100 dark:border-gray-700",children:[!collapsed&&(0,jsxRuntime_module.FD)("div",{className:"space-y-3",children:[(0,jsxRuntime_module.FD)("div",{className:"flex items-center space-x-3",children:[(0,jsxRuntime_module.Y)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-sm",children:(0,jsxRuntime_module.Y)("span",{className:"text-xs font-semibold text-white",children:authService.state.user?.email?.charAt(0).toUpperCase()||"U"})}),(0,jsxRuntime_module.FD)("div",{className:"flex-1 min-w-0",children:[(0,jsxRuntime_module.Y)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:authService.state.user?.email||"User"}),(0,jsxRuntime_module.Y)("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:authService.state.user?.role||"user"})]})]}),(0,jsxRuntime_module.FD)("button",{onClick:()=>authService.logout(),className:"w-full flex items-center justify-center px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md transition-colors",children:[(0,jsxRuntime_module.Y)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,jsxRuntime_module.Y)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})]}),collapsed&&(0,jsxRuntime_module.FD)("div",{className:"space-y-2",children:[(0,jsxRuntime_module.Y)("div",{className:"flex justify-center",children:(0,jsxRuntime_module.Y)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-sm",children:(0,jsxRuntime_module.Y)("span",{className:"text-xs font-semibold text-white",children:authService.state.user?.email?.charAt(0).toUpperCase()||"U"})})}),(0,jsxRuntime_module.Y)("button",{onClick:()=>authService.logout(),className:"w-full flex items-center justify-center p-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md transition-colors",title:"Sign Out",children:(0,jsxRuntime_module.Y)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,jsxRuntime_module.Y)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})]})}const Sidebar_stories={title:"Components/Sidebar",component:Sidebar,parameters:{layout:"fullscreen",docs:{description:{component:"\nThe main navigation sidebar for the admin interface.\n\n## Features\n- Collapsible design\n- Active tab highlighting\n- Responsive behavior\n- Clean, minimal navigation\n        "}}},argTypes:{activeTab:{control:"select",options:["overview","rules","upstreams","history"],description:"Currently active tab"},collapsed:{control:"boolean",description:"Collapsed state"}}},Expanded={args:{activeTab:"overview",collapsed:!1,onTabChange:tab=>console.log("Tab changed:",tab)}},Collapsed={args:{activeTab:"rules",collapsed:!0,onTabChange:tab=>console.log("Tab changed:",tab)}},AllTabs={render:()=>(0,jsxRuntime_module.FD)("div",{className:"flex h-screen",children:[(0,jsxRuntime_module.Y)(Sidebar,{activeTab:"upstreams",collapsed:!1,onTabChange:tab=>console.log("Tab changed:",tab)}),(0,jsxRuntime_module.FD)("div",{className:"flex-1 p-8 bg-gray-50 dark:bg-gray-900",children:[(0,jsxRuntime_module.Y)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Main Content Area"}),(0,jsxRuntime_module.Y)("p",{className:"text-gray-600 dark:text-gray-400",children:"This shows how the sidebar looks alongside main content."})]})]})},__namedExportsOrder=["Expanded","Collapsed","AllTabs"];Expanded.parameters={...Expanded.parameters,docs:{...Expanded.parameters?.docs,source:{originalSource:"{\n  args: {\n    activeTab: 'overview',\n    collapsed: false,\n    onTabChange: (tab: string) => console.log('Tab changed:', tab)\n  }\n}",...Expanded.parameters?.docs?.source}}},Collapsed.parameters={...Collapsed.parameters,docs:{...Collapsed.parameters?.docs,source:{originalSource:"{\n  args: {\n    activeTab: 'rules',\n    collapsed: true,\n    onTabChange: (tab: string) => console.log('Tab changed:', tab)\n  }\n}",...Collapsed.parameters?.docs?.source}}},AllTabs.parameters={...AllTabs.parameters,docs:{...AllTabs.parameters?.docs,source:{originalSource:'{\n  render: () => <div className="flex h-screen">\n      <Sidebar activeTab="upstreams" collapsed={false} onTabChange={(tab: string) => console.log(\'Tab changed:\', tab)} />\n      <div className="flex-1 p-8 bg-gray-50 dark:bg-gray-900">\n        <h1 className="text-2xl font-bold text-gray-900 dark:text-white mb-4">\n          Main Content Area\n        </h1>\n        <p className="text-gray-600 dark:text-gray-400">\n          This shows how the sidebar looks alongside main content.\n        </p>\n      </div>\n    </div>\n}',...AllTabs.parameters?.docs?.source}}}}}]);